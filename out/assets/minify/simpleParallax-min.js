/*
 simpleParallax - simpleParallax is a simple JavaScript library that gives your website parallax animations on any images,
 @date: 13-06-2019 16:24:29,
 @version: 5.1.0,
 @link: https://simpleparallax.com/
*/
(function(q,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define("simpleParallax",[],f):"object"===typeof exports?exports.simpleParallax=f():q.simpleParallax=f()})(window,function(){return function(q){function f(c){if(n[c])return n[c].exports;var g=n[c]={i:c,l:!1,exports:{}};q[c].call(g.exports,g,g.exports,f);g.l=!0;return g.exports}var n={};f.m=q;f.c=n;f.d=function(c,g,l){f.o(c,g)||Object.defineProperty(c,g,{enumerable:!0,get:l})};
f.r=function(c){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})};f.t=function(c,g){g&1&&(c=f(c));if(g&8||g&4&&"object"===typeof c&&c&&c.__esModule)return c;var l=Object.create(null);f.r(l);Object.defineProperty(l,"default",{enumerable:!0,value:c});if(g&2&&"string"!=typeof c)for(var t in c)f.d(l,t,function(u){return c[u]}.bind(null,t));return l};f.n=function(c){var g=c&&c.__esModule?function(){return c["default"]}:
function(){return c};f.d(g,"a",g);return g};f.o=function(c,g){return Object.prototype.hasOwnProperty.call(c,g)};f.p="";return f(f.s=0)}([function(q,f,n){function c(d,a){for(var b=0;b<a.length;b++){var e=a[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function g(d,a,b){a&&c(d.prototype,a);b&&c(d,b);return d}function l(d,a){for(var b=0;b<a.length;b++){var e=a[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(d,e.key,e)}}function t(d,a,b){a&&l(d.prototype,a);b&&l(d,b);return d}function u(d,a){for(var b=0;b<a.length;b++){var e=a[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function B(d,a,b){a&&u(d.prototype,a);b&&u(d,b);return d}n.r(f);q=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.positions={top:0,bottom:0,height:0}}g(d,[{key:"setViewportTop",value:function(){this.positions.top=
window.pageYOffset;return this.positions}},{key:"setViewportBottom",value:function(){this.positions.bottom=this.positions.top+this.positions.height;return this.positions}},{key:"setViewportHeight",value:function(){this.positions.height=document.documentElement.clientHeight;return this.positions}},{key:"setViewportAll",value:function(){this.positions.top=window.pageYOffset;this.positions.bottom=this.positions.top+this.positions.height;this.positions.height=document.documentElement.clientHeight;return this.positions}}]);
return d}();var v=function(){for(var d=["transform","webkitTransform","mozTransform","oTransform","msTransform"],a,b=0;void 0===a;)a=void 0!==document.createElement("div").style[d[b]]?d[b]:void 0,b+=1;return a}(),C=function(){function d(a,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.elementContainer=this.element=a;this.settings=b;this.isVisible=!0;this.isInit=!1;this.oldTranslateValue=-1;this.init=this.init.bind(this);a&&a.complete&&("undefined"===typeof a.naturalWidth||
0!==a.naturalWidth)?this.init():this.element.addEventListener("load",this.init)}t(d,[{key:"init",value:function(){this.isInit||this.element.closest(".simpleParallax")||(!1===this.settings.overflow&&this.wrapElement(this.element),this.setStyle(),this.getElementOffset(),this.intersectionObserver(),this.getTranslateValue(),this.animate(),this.isInit=!0)}},{key:"wrapElement",value:function(){var a=this.element.closest("picture")||this.element,b=document.createElement("div");b.classList.add("simpleParallax");
b.style.overflow="hidden";a.parentNode.insertBefore(b,a);b.appendChild(a);this.elementContainer=b}},{key:"unWrapElement",value:function(){var a=this.elementContainer,b=a.replaceWith,e=b.apply,h=a.childNodes;if(Array.isArray(h)){var m=0;for(var x=Array(h.length);m<h.length;m++)x[m]=h[m];m=x}else m=void 0;m||(m=Symbol.iterator in Object(h)||"[object Arguments]"===Object.prototype.toString.call(h)?Array.from(h):void 0);if(!(h=m))throw new TypeError("Invalid attempt to spread non-iterable instance");
e.call(b,a,h)}},{key:"setStyle",value:function(){!1===this.settings.overflow&&(this.element.style[v]="scale(".concat(this.settings.scale,")"));0<this.settings.delay&&(this.element.style.transition="transform ".concat(this.settings.delay,"s ").concat(this.settings.transition));this.element.style.willChange="transform"}},{key:"unSetStyle",value:function(){this.element.style.willChange="";this.element.style[v]="";this.element.style.transition=""}},{key:"getElementOffset",value:function(){var a=this.elementContainer.getBoundingClientRect();
this.elementHeight=a.height;this.elementTop=a.top+k.positions.top;this.elementBottom=this.elementHeight+this.elementTop}},{key:"buildThresholdList",value:function(){for(var a=[],b=1;b<=this.elementHeight;b++)a.push(b/this.elementHeight);return a}},{key:"intersectionObserver",value:function(){var a={root:null,threshold:this.buildThresholdList()};this.observer=new IntersectionObserver(this.intersectionObserverCallback.bind(this),a);this.observer.observe(this.element)}},{key:"intersectionObserverCallback",
value:function(a){for(var b=a.length-1;0<=b;b--)this.isVisible=a[b].isIntersecting?!0:!1}},{key:"checkIfVisible",value:function(){return this.elementBottom>k.positions.top&&this.elementTop<k.positions.bottom}},{key:"getRangeMax",value:function(){var a=this.element.clientHeight;this.rangeMax=a*this.settings.scale-a}},{key:"getTranslateValue",value:function(){var a=((k.positions.bottom-this.elementTop)/((k.positions.height+this.elementHeight)/100)).toFixed(1);a=Math.min(100,Math.max(0,a));if(this.oldPercentage===
a)return!1;this.rangeMax||this.getRangeMax();this.translateValue=(a/100*this.rangeMax-this.rangeMax/2).toFixed(0);if(this.oldTranslateValue===this.translateValue)return!1;this.oldPercentage=a;this.oldTranslateValue=this.translateValue;return!0}},{key:"animate",value:function(){var a=0,b=0;if(this.settings.orientation.includes("left")||this.settings.orientation.includes("right"))b="".concat(this.settings.orientation.includes("left")?-1*this.translateValue:this.translateValue,"px");if(this.settings.orientation.includes("up")||
this.settings.orientation.includes("down"))a="".concat(this.settings.orientation.includes("up")?-1*this.translateValue:this.translateValue,"px");a=!1===this.settings.overflow?"translate3d(".concat(b,", ").concat(a,", 0) scale(").concat(this.settings.scale,")"):"translate3d(".concat(b,", ").concat(a,", 0)");this.element.style[v]=a}}]);return d}();n.d(f,"viewport",function(){return k});n.d(f,"default",function(){return D});var k=new q,y=!0,z=!1,p=[],r,w,A,D=function(){function d(a,b){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");a&&(this.elements=NodeList.prototype.isPrototypeOf(a)||HTMLCollection.prototype.isPrototypeOf(a)?Array.from(a):"string"===typeof a||a instanceof String?document.querySelectorAll(a):[a],this.defaults={delay:.4,orientation:"up",scale:1.3,overflow:!1,transition:"cubic-bezier(0,0,0,1)",breakpoint:!1},this.settings=Object.assign(this.defaults,b),this.settings.breakpoint&&document.documentElement.clientWidth<=this.settings.breakpoint||("IntersectionObserver"in
window||(y=!1),this.lastPosition=-1,this.resizeIsDone=this.resizeIsDone.bind(this),this.handleResize=this.handleResize.bind(this),this.proceedRequestAnimationFrame=this.proceedRequestAnimationFrame.bind(this),this.init()))}B(d,[{key:"init",value:function(){k.setViewportAll();for(var a=this.elements.length-1;0<=a;a--){var b=new C(this.elements[a],this.settings);p.push(b)}r=p.length;z||(this.proceedRequestAnimationFrame(),window.addEventListener("resize",this.resizeIsDone),z=!0)}},{key:"resizeIsDone",
value:function(){clearTimeout(A);A=setTimeout(this.handleResize,500)}},{key:"handleResize",value:function(){k.setViewportAll();this.settings.breakpoint&&document.documentElement.clientWidth<=this.settings.breakpoint&&this.destroy();for(var a=r-1;0<=a;a--)p[a].getElementOffset(),p[a].getRangeMax();this.lastPosition=-1}},{key:"proceedRequestAnimationFrame",value:function(){k.setViewportTop();if(this.lastPosition===k.positions.top)w=window.requestAnimationFrame(this.proceedRequestAnimationFrame);else{k.setViewportBottom();
for(var a=r-1;0<=a;a--)this.proceedElement(p[a]);w=window.requestAnimationFrame(this.proceedRequestAnimationFrame);this.lastPosition=k.positions.top}}},{key:"proceedElement",value:function(a){(y?a.isVisible:a.checkIfVisible())&&a.getTranslateValue()&&a.animate()}},{key:"destroy",value:function(){var a=this,b=[];p=p.filter(function(h){if(a.elements.includes(h.element))b.push(h);else return h});for(var e=b.length-1;0<=e;e--)b[e].unSetStyle(),!1===this.settings.overflow&&b[e].unWrapElement();r=p.length;
r||(window.cancelAnimationFrame(w),window.removeEventListener("resize",this.handleResize))}}]);return d}()}])["default"]});